{% extends "_layouts/examples.html" %}
{% block title %}Notifications / Toast{% endblock %}

{% block standalone_css %}patterns_notifications{% endblock %}

{% set type = request.args.get('type') %}
{% set theme = request.args.get('theme') %}
{% set style = request.args.get('style') %}
{% set dismiss = request.args.get('dismiss') %}
{% set actions = request.args.get('actions') %}
{% set timestamp = request.args.get('timestamp') %}

{% block content %}
<div class="p-notification{{ '--' ~ type if type else '' }}{% if theme == 'dark' %} is-dark{% endif %}{% if style == 'inline' %} is-inline{% endif %}" id="notification">
  <div class="p-notification__content">
    <h5 class="p-notification__title">Permissions changed</h5>
    <p class="p-notification__message">Anyone with access can view your invited users.</p>
    {%- if dismiss == 'true' %}
    <button class="p-notification__close" aria-controls="notification">Close</button>
    {%- endif %}
  </div>
  {%- if actions == 'true' or timestamp == 'true' %}
  <div class="p-notification__meta">
    {%- if timestamp == 'true' %}
    <span class="p-notification__timestamp">1h ago</span>
    {%- endif %}
    {%- if actions == 'true' %}
    <div class="p-notification__actions">
      <a class="p-notification__action" href="#">Action 1</a>
      <a class="p-notification__action" href="#">Action 2</a>
    </div>
    {%- endif %}
  </div>
  {%- endif %}
</div>
{%- if dismiss == 'true' %}
<script>
/**
  Attaches event listener for hide notification on close button click.
  @param {HTMLElement} closeButton The notification close button element.
*/
function setupCloseButton(closeButton) {
  closeButton.addEventListener('click', function(event) {
    var target = event.target.getAttribute('aria-controls');
    var notification = document.getElementById(target);

    if (notification) {
      notification.classList.add('u-hide');
    }
  });
}

// Set up all notification close buttons.
var closeButtons = document.querySelectorAll('.p-notification__close');

for (var i = 0, l = closeButtons.length; i < l; i++) {
  setupCloseButton(closeButtons[i]);
}
</script>
{%- endif %}
{% endblock %}
